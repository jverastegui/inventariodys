"use strict";(self.webpackChunkPFVerasteguiQuispe=self.webpackChunkPFVerasteguiQuispe||[]).push([[710],{8710:(L,A,n)=>{n.r(A),n.d(A,{UsuarioModule:()=>E});var m=n(9808),b=n(4035),u=n(2382),o=n(5e3),v=n(7116),Z=n(1493),C=n(9019),I=n(520);let N=(()=>{class t{constructor(r){this.httpClient=r,this.ApiUsuario=C.N.baseUrl+"usuario/"}getAllUsuario(){return this.httpClient.get(this.ApiUsuario)}GetRoles(){return this.httpClient.get(this.ApiUsuario+"GetRoles")}BuscarUsuario(r){return this.httpClient.get(this.ApiUsuario+"BuscarUsuario/"+r)}EliminarUsuario(r){return this.httpClient.delete(this.ApiUsuario+r)}AgregarUsuario(r){return this.httpClient.post(this.ApiUsuario,r)}EditarUsuario(r){return this.httpClient.put(this.ApiUsuario+r.idUsuario,r)}}return t.\u0275fac=function(r){return new(r||t)(o.LFG(I.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n(5889);function T(t,l){if(1&t){const r=o.EpF();o.TgZ(0,"tr")(1,"td")(2,"button",12),o.NdJ("click",function(){const i=o.CHM(r).$implicit;return o.oxw().EliminarUsuario(i.idUsuario)}),o._UZ(3,"span",13),o._uU(4," Eliminar "),o.qZA()(),o.TgZ(5,"td")(6,"button",12),o.NdJ("click",function(){const i=o.CHM(r).$implicit,a=o.oxw(),d=o.MAs(35);return a.EditarUsuario(i,d)}),o._UZ(7,"span",13),o._uU(8," Editar "),o.qZA()(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.TgZ(15,"td"),o._uU(16),o.qZA(),o.TgZ(17,"td"),o._uU(18),o.qZA()()}if(2&t){const r=l.$implicit;o.xp6(10),o.hij(" ",r.nombres," "),o.xp6(2),o.hij(" ",r.apellidoPaterno,""),o.xp6(2),o.hij(" ",r.apellidoMaterno,""),o.xp6(2),o.hij(" ",r.userName,""),o.xp6(2),o.hij(" ",null==r.rol?null:r.rol.nombre,"")}}function q(t,l){if(1&t&&(o.TgZ(0,"option",44),o._uU(1),o.qZA()),2&t){const r=l.$implicit;o.Q6J("value",r.idAlumno),o.xp6(1),o.Oqu((r.nombres+" "+r.apellidoPaterno+" "+r.apellidoMaterno).toUpperCase())}}function P(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function R(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function M(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function y(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function J(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function w(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Campo Obligatorio"),o.qZA())}function O(t,l){if(1&t&&(o.TgZ(0,"option",44),o._uU(1),o.qZA()),2&t){const r=l.$implicit;o.Q6J("value",r.idRol),o.xp6(1),o.Oqu(r.nombre.toUpperCase())}}function V(t,l){1&t&&(o.TgZ(0,"div",45),o._uU(1,"* Es necesario completar todos los campos"),o.qZA())}function S(t,l){if(1&t){const r=o.EpF();o.TgZ(0,"div",14)(1,"h4",15),o._uU(2),o.qZA(),o.TgZ(3,"button",16),o.NdJ("click",function(){return o.CHM(r).dismiss("Cross click")}),o.qZA()(),o.TgZ(4,"div",17)(5,"form",18),o.NdJ("ngSubmit",function(s){return o.CHM(r),o.oxw().submit(s)}),o._UZ(6,"input",19),o.TgZ(7,"div",6)(8,"div",7)(9,"label",20),o._uU(10,"Alumno (Opcional)"),o.qZA(),o.TgZ(11,"select",21),o.NdJ("change",function(s){return o.CHM(r),o.oxw().changeAlumno(s)}),o.TgZ(12,"option",22),o._uU(13,"Ninguno"),o.qZA(),o.YNc(14,q,2,2,"option",23),o.ALo(15,"async"),o.qZA()(),o.TgZ(16,"div",7)(17,"label",24),o._uU(18,"Nombres"),o.qZA(),o._UZ(19,"input",25),o.YNc(20,P,2,0,"div",26),o.qZA()(),o.TgZ(21,"div",6)(22,"div",27)(23,"label",28),o._uU(24,"Apellido Paterno"),o.qZA(),o._UZ(25,"input",29),o.YNc(26,R,2,0,"div",26),o.qZA(),o.TgZ(27,"div",27)(28,"label",30),o._uU(29,"Apellido Materno"),o.qZA(),o._UZ(30,"input",31),o.YNc(31,M,2,0,"div",26),o.qZA(),o.TgZ(32,"div",27)(33,"label",32),o._uU(34,"Nombre Usuario"),o.qZA(),o._UZ(35,"input",33),o.YNc(36,y,2,0,"div",26),o.qZA()(),o.TgZ(37,"div",6)(38,"div",27)(39,"label",34),o._uU(40,"Contrase\xf1a"),o.qZA(),o._UZ(41,"input",35),o.YNc(42,J,2,0,"div",26),o.qZA(),o.TgZ(43,"div",27)(44,"label",36),o._uU(45,"Confirmar Contrase\xf1a"),o.qZA(),o._UZ(46,"input",37),o.YNc(47,w,2,0,"div",26),o.qZA(),o.TgZ(48,"div",27)(49,"label",38),o._uU(50,"Rol"),o.qZA(),o.TgZ(51,"select",39)(52,"option",40),o._uU(53,"Seleccione"),o.qZA(),o.YNc(54,O,2,2,"option",23),o.ALo(55,"async"),o.qZA()()(),o.TgZ(56,"div",41)(57,"button",42),o._uU(58,"Guardar"),o.qZA(),o.YNc(59,V,2,0,"div",43),o.qZA()()()}if(2&t){const r=o.oxw();let e,s,i,a,d,f,p,h,c,_,g,U;o.xp6(2),o.Oqu(r.tituloModal),o.xp6(3),o.Q6J("formGroup",r.formulario),o.xp6(9),o.Q6J("ngForOf",o.lcZ(15,18,r.ObsAlumnos)),o.xp6(5),o.Q6J("ngClass","INVALID"==(null==(e=r.formulario.get("Nombres"))?null:e.status)&&1==(null==(e=r.formulario.get("Nombres"))?null:e.touched)?"Invalid-Input":"VALID"==(null==(e=r.formulario.get("Nombres"))?null:e.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(s=r.formulario.get("Nombres"))||null==s.errors?null:s.errors.required)&&1==(null==(s=r.formulario.get("Nombres"))?null:s.touched)),o.xp6(5),o.Q6J("ngClass","INVALID"==(null==(i=r.formulario.get("ApellidoPaterno"))?null:i.status)&&1==(null==(i=r.formulario.get("ApellidoPaterno"))?null:i.touched)?"Invalid-Input":"VALID"==(null==(i=r.formulario.get("ApellidoPaterno"))?null:i.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(a=r.formulario.get("ApellidoPaterno"))||null==a.errors?null:a.errors.required)&&1==(null==(a=r.formulario.get("ApellidoPaterno"))?null:a.touched)),o.xp6(4),o.Q6J("ngClass","INVALID"==(null==(d=r.formulario.get("ApellidoMaterno"))?null:d.status)&&1==(null==(d=r.formulario.get("ApellidoMaterno"))?null:d.touched)?"Invalid-Input":"VALID"==(null==(d=r.formulario.get("ApellidoMaterno"))?null:d.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(f=r.formulario.get("ApellidoMaterno"))||null==f.errors?null:f.errors.required)&&1==(null==(f=r.formulario.get("ApellidoMaterno"))?null:f.touched)),o.xp6(4),o.Q6J("ngClass","INVALID"==(null==(p=r.formulario.get("Usuario"))?null:p.status)&&1==(null==(p=r.formulario.get("Usuario"))?null:p.touched)?"Invalid-Input":"VALID"==(null==(p=r.formulario.get("Usuario"))?null:p.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(h=r.formulario.get("Usuario"))||null==h.errors?null:h.errors.required)&&1==(null==(h=r.formulario.get("Usuario"))?null:h.touched)),o.xp6(5),o.Q6J("ngClass","INVALID"==(null==(c=r.formulario.get("Password"))?null:c.status)&&1==(null==(c=r.formulario.get("Password"))?null:c.touched)?"Invalid-Input":"VALID"==(null==(c=r.formulario.get("Password"))?null:c.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(_=r.formulario.get("Password"))||null==_.errors?null:_.errors.required)&&1==(null==(_=r.formulario.get("Password"))?null:_.touched)),o.xp6(4),o.Q6J("ngClass","INVALID"==(null==(g=r.formulario.get("Password2"))?null:g.status)&&1==(null==(g=r.formulario.get("Password2"))?null:g.touched)?"Invalid-Input":"VALID"==(null==(g=r.formulario.get("Password2"))?null:g.status)?"Valid-Input":""),o.xp6(1),o.Q6J("ngIf",(null==(U=r.formulario.get("Password2"))||null==U.errors?null:U.errors.required)&&1==(null==(U=r.formulario.get("Password2"))?null:U.touched)),o.xp6(7),o.Q6J("ngForOf",o.lcZ(55,20,r.ObsRol)),o.xp6(3),o.Q6J("disabled",!r.formulario.valid),o.xp6(2),o.Q6J("ngIf",!r.formulario.valid)}}const F=[{path:"",component:(()=>{class t{constructor(r,e,s,i,a,d){this.fb=r,this.modalService=s,this.ServAlumno=i,this.ServUsuario=a,this.swal=d,this.tituloModal="",this.NombreBuscar="",this.formulario=r.group({IdUsuario:[0],Nombres:["",[u.kI.required]],ApellidoPaterno:["",[u.kI.required]],ApellidoMaterno:[0,[u.kI.required]],Usuario:["",[u.kI.required]],Password:["",[u.kI.required]],Password2:["",[u.kI.required]],IdAlumno:[0],IdRol:[0,[u.kI.required,u.kI.min(1)]]}),e.backdrop="static",e.keyboard=!1}ngOnDestroy(){this.suscripcionEdit&&this.suscripcionEdit.unsubscribe(),this.suscripcionAdd&&this.suscripcionAdd.unsubscribe(),this.suscripcionDelete&&this.suscripcionDelete.unsubscribe(),this.suscripcionFiltro&&this.suscripcionFiltro.unsubscribe(),this.suscripcionAlum&&this.suscripcionAlum.unsubscribe()}ngOnInit(){this.ObsUsuario=this.ServUsuario.getAllUsuario(),this.ObsRol=this.ServUsuario.GetRoles(),this.ObsAlumnos=this.ServAlumno.getAllAlumnos()}open(r){this.modalService.open(r,{size:"lg"}),this.tituloModal="Registrar Usuario",this.formulario.reset()}changeAlumno(r){this.suscripcionAlum=this.ServAlumno.getAlumnoById(r.target.value).subscribe(e=>{this.formulario.controls.Nombres.setValue(e.nombres),this.formulario.controls.ApellidoPaterno.setValue(e.apellidoPaterno),this.formulario.controls.ApellidoMaterno.setValue(e.apellidoMaterno)})}LimpiarBusqueda(){this.NombreBuscar="",this.ngOnInit()}FiltrarUsuario(){this.ObsUsuario=this.ServUsuario.BuscarUsuario(this.NombreBuscar)}EliminarUsuario(r){this.swal.Question("Eliminar Usuario","\xbfDesea Eliminar el registro seleccionado?").then(e=>{e.isConfirmed&&(this.suscripcionDelete=this.ServUsuario.EliminarUsuario(null!=r?r:0).subscribe(s=>{this.LimpiarBusqueda()}))})}changeBuscar(r){this.NombreBuscar=r,0==this.NombreBuscar.length?this.ngOnInit():this.FiltrarUsuario()}cerrar(){this.modalService.dismissAll()}submit(r){var e;if(this.formulario.valid){if(this.formulario.value.Password!=this.formulario.value.Password2)return void this.swal.Warning("Usuario","Las constrase\xf1as no coinciden.");let s=null!==(e=this.formulario.value.IdUsuario)&&void 0!==e?e:0;0==s?this.suscripcionAdd=this.ServUsuario.AgregarUsuario({idUsuario:0,nombres:this.formulario.value.Nombres,apellidoPaterno:this.formulario.value.ApellidoPaterno,apellidoMaterno:this.formulario.value.ApellidoMaterno,userName:this.formulario.value.Usuario,password:this.formulario.value.Password,idRol:this.formulario.value.IdRol,idAlumno:this.formulario.value.IdAlumno}).subscribe(a=>{this.formulario.reset(),this.modalService.dismissAll(),this.LimpiarBusqueda(),this.swal.ToastSuccess("Se registro correctamente el Usuario.")},a=>{this.swal.ToastError("Ocurrio un error al procesar la solicitud.")}):this.suscripcionEdit=this.ServUsuario.EditarUsuario({idUsuario:s,nombres:this.formulario.value.Nombres,apellidoPaterno:this.formulario.value.ApellidoPaterno,apellidoMaterno:this.formulario.value.ApellidoMaterno,userName:this.formulario.value.Usuario,password:this.formulario.value.Password,idRol:this.formulario.value.IdRol,idAlumno:this.formulario.value.IdAlumno}).subscribe(a=>{this.formulario.reset(),this.modalService.dismissAll(),this.LimpiarBusqueda(),this.swal.ToastSuccess("Se actualizo correctamente el Usuario.")},a=>{this.swal.ToastError("Ocurrio un error al procesar la solicitud.")})}}EditarUsuario(r,e){null!=r&&null!=r&&(this.formulario.controls.IdUsuario.setValue(r.idUsuario),this.formulario.controls.Nombres.setValue(r.nombres),this.formulario.controls.ApellidoPaterno.setValue(r.apellidoPaterno),this.formulario.controls.ApellidoMaterno.setValue(r.apellidoMaterno),this.formulario.controls.Usuario.setValue(r.userName),this.formulario.controls.Password.setValue(r.password),this.formulario.controls.Password2.setValue(r.password),this.formulario.controls.IdRol.setValue(r.idRol),this.formulario.controls.IdAlumno.setValue(r.idAlumno),this.tituloModal="Actualizar Registro de Usuario",this.modalService.open(e,{size:"lg"}))}}return t.\u0275fac=function(r){return new(r||t)(o.Y36(u.qu),o.Y36(v.NM),o.Y36(v.FF),o.Y36(Z.X),o.Y36(N),o.Y36(x.J))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-registro-usuario"]],decls:36,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","txtNombreBusqueda",1,"form-label"],["type","text","id","txtNombreBusqueda","placeholder","Ingrese Nombre Usuario para la busqueda",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-6"],[1,"btn","btn-lg","btn-outline-primary",2,"margin-left","25px",3,"click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["content",""],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-play"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["action","#",1,"",3,"formGroup","ngSubmit"],["type","hidden","name","IdUsuario","formControlName","IdUsuario"],["for","cboAlumno",1,"form-label"],["id","cboAlumno","formControlName","IdAlumno",1,"form-control",3,"change"],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","txtNombres",1,"form-label"],["type","text","id","txtNombres","formControlName","Nombres","placeholder","Ingrese el Nombre",1,"form-control",3,"ngClass"],["class","invalid-feedback","style","display: block;",4,"ngIf"],[1,"col-md-4"],["for","txtApePat",1,"form-label"],["type","text","id","txtApePat","formControlName","ApellidoPaterno","placeholder","Apellido Paterno",1,"form-control",3,"ngClass"],["for","txtApeMat",1,"form-label"],["type","text","id","txtApeMat","formControlName","ApellidoMaterno","placeholder","Apellido Paterno",1,"form-control",3,"ngClass"],["for","txtUser",1,"form-label"],["type","text","id","txtUser","placeholder","Nombre Usuario","formControlName","Usuario",1,"form-control",3,"ngClass"],["for","txtPass",1,"form-label"],["type","password","id","txtPass","placeholder","Contrase\xf1a","formControlName","Password",1,"form-control",3,"ngClass"],["for","txtPass2",1,"form-label"],["type","password","id","txtPass2","placeholder","Contrase\xf1a","formControlName","Password2",1,"form-control",3,"ngClass"],["for","cboRol",1,"form-label"],["id","cboRol","formControlName","IdRol",1,"form-control"],["value","0"],[1,"col-md-12",2,"text-align","center","padding-top","30px"],["type","submit",1,"btn","btn-primary",3,"disabled"],["style","display: block;","class","invalid-feedback",4,"ngIf"],[3,"value"],[1,"invalid-feedback",2,"display","block"]],template:function(r,e){if(1&r){const s=o.EpF();o.TgZ(0,"div",0)(1,"div",1),o._uU(2," Registro Usuario "),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"label",4),o._uU(6,"Nombres Usuario"),o.qZA(),o.TgZ(7,"input",5),o.NdJ("ngModelChange",function(a){return e.changeBuscar(a)})("ngModelChange",function(a){return e.NombreBuscar=a}),o.qZA()(),o.TgZ(8,"div",6)(9,"div",7)(10,"button",8),o.NdJ("click",function(){o.CHM(s);const a=o.MAs(35);return e.open(a)}),o._uU(11,"Nuevo"),o.qZA(),o.TgZ(12,"button",8),o.NdJ("click",function(){return e.LimpiarBusqueda()}),o._uU(13,"Limpiar Busqueda"),o.qZA()()(),o.TgZ(14,"table",9)(15,"thead")(16,"tr")(17,"th"),o._uU(18,"Eliminar"),o.qZA(),o.TgZ(19,"th"),o._uU(20,"Editar"),o.qZA(),o.TgZ(21,"th"),o._uU(22,"Nombres"),o.qZA(),o.TgZ(23,"th"),o._uU(24,"Apellido Paterno"),o.qZA(),o.TgZ(25,"th"),o._uU(26,"Apellido Materno"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Usuario"),o.qZA(),o.TgZ(29,"th"),o._uU(30,"Rol"),o.qZA()()(),o.TgZ(31,"tbody"),o.YNc(32,T,19,5,"tr",10),o.ALo(33,"async"),o.qZA()()()(),o.YNc(34,S,60,22,"ng-template",null,11,o.W1O)}2&r&&(o.xp6(7),o.Q6J("ngModel",e.NombreBuscar),o.xp6(25),o.Q6J("ngForOf",o.lcZ(33,2,e.ObsUsuario)))},directives:[u.Fj,u.JJ,u.On,m.sg,u._Y,u.JL,u.sg,u.u,u.EJ,u.YN,u.Kr,m.mk,m.O5],pipes:[m.Ov],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[m.ez,b.Bz.forChild(F)],b.Bz]}),t})();var B=n(8039);let E=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[m.ez,k,B.m]]}),t})()}}]);